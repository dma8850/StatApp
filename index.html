<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Sports Stat Tracker</title>
<style>
body { font-family: Arial; margin:0; background:#f4f6f9; }
header { background:#1d3557; color:white; padding:15px; text-align:center; font-size:22px; }
nav { display:flex; background:#457b9d; }
nav button {
  flex:1;
  padding:12px;
  border:none;
  background:#457b9d;
  color:white;
  font-size:16px;
  cursor:pointer;
}
nav button.active { background:#1d3557; }
.section { display:none; padding:15px; }
.section.active { display:block; }
table { width:100%; border-collapse:collapse; margin-bottom:20px; }
th, td { border:1px solid #ccc; padding:6px; text-align:center; }
input { width:90%; padding:4px; }
select { width:100%; }
.publish-btn {
  width:100%;
  padding:14px;
  background:#1d3557;
  color:white;
  border:none;
  font-size:16px;
  margin-top:10px;
  cursor:pointer;
}
.summary-box {
  max-height:200px;
  overflow-y:auto;
  border:1px solid #ccc;
  padding:10px;
  background:white;
  margin-bottom:15px;
}
</style>
</head>
<body>

<header>Sports Stat Tracker</header>

<nav>
  <button id="btnNBA" class="active" onclick="showTab('nba')">NBA Boxscore</button>
  <button id="btnEPL" onclick="showTab('epl')">EPL Match</button>
  <button id="btnSummary" onclick="showTab('summary')">Summary</button>
</nav>

<!-- NBA -->
<div id="nba" class="section active">
<h2>NBA Boxscore</h2>

<label>Team 1:</label>
<select id="nbaTeam1"></select>
<label><input type="checkbox" id="nbaWin1"> Won</label>

<label>Team 2:</label>
<select id="nbaTeam2"></select>
<label><input type="checkbox" id="nbaWin2"> Won</label>

<h3>Team 1 Players</h3>
<table id="nbaTable1"></table>

<h3>Team 2 Players</h3>
<table id="nbaTable2"></table>

<button class="publish-btn" onclick="publishNBA()">Publish NBA Game</button>
</div>

<!-- EPL -->
<div id="epl" class="section">
<h2>EPL Match</h2>

<label>Team 1:</label>
<select id="eplTeam1"></select>
<label><input type="checkbox" id="eplWin1"> Won</label>

<label>Team 2:</label>
<select id="eplTeam2"></select>
<label><input type="checkbox" id="eplWin2"> Won</label>

<h3>Team 1 Players</h3>
<table id="eplTable1"></table>

<h3>Team 2 Players</h3>
<table id="eplTable2"></table>

<button class="publish-btn" onclick="publishEPL()">Publish EPL Match</button>
</div>

<!-- SUMMARY -->
<div id="summary" class="section">
<h2>Player Averages</h2>
<div class="summary-box" id="playerSummary"></div>

<h2>Team Records</h2>
<div class="summary-box" id="teamSummary"></div>

<button class="publish-btn" onclick="backupData()">Backup Data</button>
<input type="file" onchange="restoreData(event)">
</div>

<script>

var nbaTeams = [
"Atlanta Hawks","Boston Celtics","Brooklyn Nets","Charlotte Hornets",
"Chicago Bulls","Cleveland Cavaliers","Dallas Mavericks","Denver Nuggets",
"Detroit Pistons","Golden State Warriors","Houston Rockets","Indiana Pacers",
"LA Clippers","Los Angeles Lakers","Memphis Grizzlies","Miami Heat",
"Milwaukee Bucks","Minnesota Timberwolves","New Orleans Pelicans",
"New York Knicks","Oklahoma City Thunder","Orlando Magic",
"Philadelphia 76ers","Phoenix Suns","Portland Trail Blazers",
"Sacramento Kings","San Antonio Spurs","Toronto Raptors",
"Utah Jazz","Washington Wizards"
];

var eplTeams = [
"Arsenal","Aston Villa","Bournemouth","Brentford","Brighton",
"Chelsea","Crystal Palace","Everton","Fulham","Liverpool",
"Luton Town","Manchester City","Manchester United","Newcastle",
"Nottingham Forest","Sheffield United","Tottenham","West Ham","Wolves"
];

var players = JSON.parse(localStorage.getItem("players") || "{}");
var teams = JSON.parse(localStorage.getItem("teams") || "{}");

function showTab(id){
  var sections = document.getElementsByClassName("section");
  for(var i=0;i<sections.length;i++){
    sections[i].classList.remove("active");
  }
  document.getElementById(id).classList.add("active");

  document.getElementById("btnNBA").classList.remove("active");
  document.getElementById("btnEPL").classList.remove("active");
  document.getElementById("btnSummary").classList.remove("active");

  if(id==="nba") document.getElementById("btnNBA").classList.add("active");
  if(id==="epl") document.getElementById("btnEPL").classList.add("active");
  if(id==="summary") document.getElementById("btnSummary").classList.add("active");
}

function fillSelect(id,list){
  var sel=document.getElementById(id);
  for(var i=0;i<list.length;i++){
    var opt=document.createElement("option");
    opt.value=list[i];
    opt.text=list[i];
    sel.appendChild(opt);
  }
}

function makeDropdown(){
  var select=document.createElement("select");
  for(var i=0;i<=100;i++){
    var opt=document.createElement("option");
    opt.value=i;
    opt.text=i;
    select.appendChild(opt);
  }
  return select;
}

function buildNBATable(id){
  var table=document.getElementById(id);
  table.innerHTML="<tr><th>Name</th><th>PTS</th><th>REB</th><th>AST</th><th>STL</th><th>BLK</th></tr>";
  for(var i=0;i<10;i++){
    var row=document.createElement("tr");
    var cell=document.createElement("td");
    var input=document.createElement("input");
    cell.appendChild(input);
    row.appendChild(cell);
    for(var j=0;j<5;j++){
      var statCell=document.createElement("td");
      statCell.appendChild(makeDropdown());
      row.appendChild(statCell);
    }
    table.appendChild(row);
  }
}

function buildEPLTable(id){
  var table=document.getElementById(id);
  table.innerHTML="<tr><th>Name</th><th>Goals</th><th>Assists</th></tr>";
  for(var i=0;i<11;i++){
    var row=document.createElement("tr");
    var cell=document.createElement("td");
    var input=document.createElement("input");
    cell.appendChild(input);
    row.appendChild(cell);
    for(var j=0;j<2;j++){
      var statCell=document.createElement("td");
      statCell.appendChild(makeDropdown());
      row.appendChild(statCell);
    }
    table.appendChild(row);
  }
}

function addPlayer(name,stats){
  if(!name) return;

  if(!players[name]){
    players[name]={games:0};
  }

  players[name].games++;

  for(var key in stats){
    if(!players[name][key]) players[name][key]=0;
    players[name][key]+=stats[key];
  }
}

function processTable(id,statKeys){
  var rows=document.getElementById(id).rows;
  for(var i=1;i<rows.length;i++){
    var name=rows[i].cells[0].children[0].value;
    if(!name) continue;

    var statObj={};
    for(var j=0;j<statKeys.length;j++){
      statObj[statKeys[j]]=parseInt(rows[i].cells[j+1].children[0].value);
    }
    addPlayer(name,statObj);
  }
}

function recordTeam(teamId,winId){
  var team=document.getElementById(teamId).value;
  var win=document.getElementById(winId).checked;

  if(!teams[team]){
    teams[team]={wins:0,losses:0};
  }

  if(win) teams[team].wins++;
  else teams[team].losses++;
}

function publishNBA(){
  processTable("nbaTable1",["pts","reb","ast","stl","blk"]);
  processTable("nbaTable2",["pts","reb","ast","stl","blk"]);
  recordTeam("nbaTeam1","nbaWin1");
  recordTeam("nbaTeam2","nbaWin2");
  saveData();
}

function publishEPL(){
  processTable("eplTable1",["goals","assists"]);
  processTable("eplTable2",["goals","assists"]);
  recordTeam("eplTeam1","eplWin1");
  recordTeam("eplTeam2","eplWin2");
  saveData();
}

function saveData(){
  localStorage.setItem("players",JSON.stringify(players));
  localStorage.setItem("teams",JSON.stringify(teams));
  updateSummary();
  alert("Published!");
}

function updateSummary(){
  var html="";
  for(var name in players){
    html+="<b>"+name+"</b> ("+players[name].games+" games)<br>";
    for(var key in players[name]){
      if(key!=="games"){
        html+=key+": "+(players[name][key]/players[name].games).toFixed(1)+" ";
      }
    }
    html+="<br><br>";
  }
  document.getElementById("playerSummary").innerHTML=html;

  var teamHtml="";
  for(var t in teams){
    teamHtml+=t+": "+teams[t].wins+"W - "+teams[t].losses+"L<br>";
  }
  document.getElementById("teamSummary").innerHTML=teamHtml;
}

function backupData(){
  var blob=new Blob([JSON.stringify({players:players,teams:teams})],{type:"application/json"});
  var a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="backup.json";
  a.click();
}

function restoreData(e){
  var file=e.target.files[0];
  var reader=new FileReader();
  reader.onload=function(){
    var data=JSON.parse(reader.result);
    players=data.players;
    teams=data.teams;
    saveData();
  };
  reader.readAsText(file);
}

fillSelect("nbaTeam1",nbaTeams);
fillSelect("nbaTeam2",nbaTeams);
fillSelect("eplTeam1",eplTeams);
fillSelect("eplTeam2",eplTeams);

buildNBATable("nbaTable1");
buildNBATable("nbaTable2");
buildEPLTable("eplTable1");
buildEPLTable("eplTable2");

updateSummary();

</script>

</body>
</html>
